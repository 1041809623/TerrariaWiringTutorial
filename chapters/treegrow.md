### 树木生长规律

树木生长只会发生在地图中上方的一个矩形区域内。该区域左右端和上端均距离地图边缘10格，下端为地表（worldSurface）。

每次更新中，重复以下步骤（世界宽度 * 世界高度 * 0.00003）次：

* 随机选取矩形区域内的一个图格。

  * 该格内方块类型为橡树种（ID 20）

  * 该格内液体量不超过32（约八分之一）

  * 位于任意玩家中心的左右sWidth * 0.6（默认72格），上下sHeight * 0.6（默认40.5格）范围内

* 如果上一步骤中的图格满足了所有条件，则有1/20的几率进入下一步，树木生长。

  根据类型不同，树木生长也会有不同的代码，分为普通木头和海边的棕榈木。

  游戏会根据该图格的位置向下寻找最低的橡树种图格，作为树根。

#### 各类木头（普通、腐化、丛林、神圣、猩红、蘑菇、雪地）

* 树根下方方块长有对应类型的草，或是雪块。

* 树根下方的方块，其左右相邻的方块之一也符合该条件。

* 树根所在方块完全没有液体，除非树根下的方块为丛林草。

* 树根所在格的背景墙为栅栏（各种木栅栏或金属栅栏），或无背景墙。

* 树根左右**2**格内无其他方块，上下有至少**16**格空间（丛林木需要**21**格）

符合上述条件后，将会生成一棵树，高度为5-16（丛林木21）中的随机数值。

从树根往上，每个方块都有几率出现树枝。只有左边有、只有右边有和左右都有树枝的几率均为**1/10**。同一边不会出现两个上下相邻的树枝。

树根下方左右相邻的方块里，符合第一点（长草或雪地）的方块上将会长出另一块树根。

#### 棕榈木

* 树根下方方块为沙块（普通、腐化、神圣、猩红之一）。

* 树根所在方块没有任何液体，也没有任何背景墙。

* 树根左右**1**格内无其他方块，上下有至少**30**格空间

符合上述条件后，将会生成一棵树，高度为**10-21**中的随机数值。
